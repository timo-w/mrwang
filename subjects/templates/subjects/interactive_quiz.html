{% extends "base.html" %}
{% load static %}

{% block title %}Interactive Quiz{% endblock %}

{% block css %}
<style>
  .quiz-container { max-width: 800px; margin: 2rem auto; padding: 1rem 2rem; background:#f9f9f9; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1);}
  .quiz-question { margin-bottom: 1.5rem; }
  .quiz-question h4 { margin-bottom: 0.5rem; }
  .quiz-question ul { list-style-type: none; padding: 0; }
  .quiz-question li { margin-bottom: 0.5rem; }
  .back-btn, .submit-btn { margin-top: 1rem; padding: 0.5rem 1rem; border-radius:6px; text-decoration:none; cursor:pointer; }
  .back-btn { background:#007bff;color:#fff; }
  .back-btn:hover { background:#0056b3; }
  .submit-btn { background:#28a745;color:#fff; }
  .submit-btn:hover { background:#218838; }
</style>
{% endblock %}

{% block content %}
<div class="content">
  <div class="quiz-container">
    <h1>Interactive Quiz</h1>
    <form id="quizForm">
        {% for q in quiz_questions %}
        <div class="quiz-question" data-correct="{{ q.correct_answer }}">
          <h4>{{ forloop.counter }}. {{ q.question }}</h4>
          <ul>
            {% for choice in q.choices %}
              <li>
                <label>
                  <input type="radio" name="question{{ forloop.parentloop.counter }}" value="{{ choice }}">
                  {{ choice }}
                </label>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endfor %}
      <button type="button" class="submit-btn" onclick="submitQuiz()">Submit</button>
    </form>
    <p id="quizResult"></p>
    <a href="javascript:history.back()" class="back-btn">Back</a>
  </div>
</div>

<script>
function submitQuiz() {
    const questions = document.querySelectorAll('.quiz-question');
    let correct = 0;
    questions.forEach((q, idx) => {
        const selected = q.querySelector('input[type=radio]:checked');
        if (selected) {
            if (selected.value === q.dataset.correct) {
                correct++;
                q.style.backgroundColor = '#d4edda'; // green
            } else {
                q.style.backgroundColor = '#f8d7da'; // red
            }
        } else {
            q.style.backgroundColor = '#fff3cd'; // yellow for unanswered
        }
    });
    document.getElementById('quizResult').innerText = `You scored ${correct} out of ${questions.length}`;
}
</script>
{% endblock %}
